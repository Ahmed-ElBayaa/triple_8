= nested_form_for @category, :html => { :class => 'form-horizontal' } do |f|
  = f.error_messages
  .control-group
    = f.label :name, :class => 'control-label'
    .controls
      = f.text_field :name, :class => 'text_field'
  .control-group
    = f.label :main_category, :class => 'control-label'
    .controls
      = select_field(f, @category, :parent_id, @main_categories, "id",    |
        "name", 'it is a main category', 'select')                       

    = f.fields_for :sub_categories do |b|
      .control-group
        = b.label :name, :class => 'control-label'
        .controls
          = b.text_field :name, :class => 'text_field'
          = b.link_to_remove "Remove this sub-category"
    = f.link_to_add "add sub-category", :sub_categories
  .form-actions
    = f.submit nil, :class => 'btn btn-primary'
    = link_to t('.cancel', :default => t("helpers.links.cancel")), |
      categories_path, :class => 'btn'                             
